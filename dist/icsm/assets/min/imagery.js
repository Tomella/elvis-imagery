"use strict";var ContributorsService=function(e){var t={show:!1,ingroup:!1,stick:!1};return e.get("icsm/resources/config/contributors.json").then(function(e){t.orgs=e.data}),{getState:function(){return t}}};angular.module("icsm.contributors",[]).directive("icsmContributors",["$interval","contributorsService",function(e,t){return{templateUrl:"imagery/contributors/contributors.html",scope:{},link:function(n,r){var o=void 0;n.contributors=t.getState(),n.over=function(){e.cancel(o),n.contributors.ingroup=!0},n.out=function(){o=e(function(){n.contributors.ingroup=!1},1e3)},n.unstick=function(){n.contributors.ingroup=n.contributors.show=n.contributors.stick=!1,r.find("a").blur()}}}}]).directive("icsmContributorsLink",["$interval","contributorsService",function(e,t){return{restrict:"AE",templateUrl:"imagery/contributors/show.html",scope:{},link:function(n){var r=void 0;n.contributors=t.getState(),n.over=function(){e.cancel(r),n.contributors.show=!0},n.toggleStick=function(){n.contributors.stick=!n.contributors.stick,n.contributors.stick||(n.contributors.show=n.contributors.ingroup=!1)},n.out=function(){r=e(function(){n.contributors.show=!1},700)}}}}]).factory("contributorsService",ContributorsService).filter("activeContributors",function(){return function(e){return e?e.filter(function(e){return e.enabled}):[]}}),ContributorsService.$inject=["$http"];var DownloadCtrl=function(e){e.data().then(function(e){this.data=e}.bind(this)),this.remove=function(){e.clear()},this.changeEmail=function(t){e.setEmail(t)}},DownloadService=function(e,t,n,r,o){var i="download_email",a="Download Layers",s={zoom:null,center:null,layer:null},l=null,c={getLayerGroup:function(){return r.getGroup(a)},setState:function(e){function t(){[[e.bounds.yMin,e.bounds.xMin],[e.bounds.yMax,e.bounds.xMax]];s.layer&&r.getGroup(a).removeLayer(s.layer)}function n(e){s.layer&&(r.clearGroup(a),s.layer=null)}e?t():n()},decorate:function(){var e=l.item;l.item.download=!0,e.processsing||(e.processing={clip:{xMax:null,xMin:null,yMax:null,yMin:null}})},setEmail:function(e){o.setItem(i,e)},getEmail:function(){return o.getItem(i).then(function(e){return l.email=e,e})},data:function(){return l?t.when(l):e.get("icsm/resources/config/icsm.json").then(function(e){return l=e.data,c.decorate(),l})}};return c};angular.module("imagery.download",[]).controller("DownloadCtrl",DownloadCtrl).factory("downloadService",DownloadService),DownloadCtrl.$inject=["downloadService"],DownloadService.$inject=["$http","$q","$rootScope","mapService","storageService"];var RootCtrl=function(e,t){var n=this;t.getConfig().then(function(e){n.data=e;try{var t=document.createElement("canvas");e.modern=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(r){e.modern=!1}})};angular.module("ImageryApp",["common.altthemes","common.header","common.navigation","common.panes","common.storage","common.templates","common.toolbar","explorer.config","explorer.confirm","explorer.drag","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.httpdata","explorer.info","explorer.message","explorer.modal","explorer.tabs","explorer.version","explorer.map.templates","exp.ui.templates","geo.draw","geo.elevation","geo.geosearch","geo.map","geo.maphelper","geo.measure","icsm.contributors","icsm.side-panel","imagery.download","imagery.panes","imagery.templates","imagery.toolbar","ui.bootstrap","ui.bootstrap-slider","ngAutocomplete","ngRoute","ngSanitize","page.footer"]).config(["configServiceProvider","projectsServiceProvider","versionServiceProvider",function(e,t,n){e.location("icsm/resources/config/config.json"),e.dynamicLocation("icsm/resources/config/appConfig.json?t="),n.url("icsm/assets/package.json"),t.setProject("icsm")}]).factory("userService",[function(){function e(){return!0}return{login:e,hasAcceptedTerms:e,setAcceptedTerms:e,getUsername:function(){return"anon"}}}]).controller("RootCtrl",RootCtrl),RootCtrl.$invoke=["$http","configService"];var PaneCtrl=function(e){var t=this;e.data().then(function(e){t.data=e})},PaneService=function(){return{add:function(e){},remove:function(e){}}};console.log("9999999999"),angular.module("imagery.panes",[]).directive("imageryPanes",["$rootScope","$timeout","mapService",function(e,t,n){return{templateUrl:"imagery/panes/panes.html",transclude:!0,restrict:"AE",scope:{defaultItem:"@",data:"="},link:function(e){console.log("HHHHHHHHHHHHHH4H")},controller:["$scope",function(r){var o=!1;e.$on("side.panel.change",function(e){function n(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!1,!0),window.dispatchEvent(e)}n(),t(n,100),t(n,200),t(n,300),t(n,500)}),r.view=r.defaultItem,e.$broadcast("view.changed",r.view,null),r.setView=function(t){var i=r.view;r.view===t?(t&&(o=!0),r.view=""):(t||(o=!0),r.view=t),e.$broadcast("view.changed",r.view,i),o&&n.getMap().then(function(e){e._onResize()})},t(function(){e.$broadcast("view.changed",r.view,null)},50)}]}}]).directive("icsmTabs",[function(){return{templateUrl:"imagery/panes/tabs.html",require:"^icsmPanes"}}]).controller("PaneCtrl",PaneCtrl).factory("paneService",PaneService),PaneCtrl.$inject=["paneService"],PaneService.$inject=[],angular.module("imagery.toolbar",[]).directive("elevationToolbar",[function(){return{restrict:"AE",templateUrl:"imagery/toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(e,t){var n=this;t.getConfig().then(function(e){n.links=e.toolbarLinks}),e.item="",e.toggleItem=function(t){e.item=e.item===t?"":t}}]),angular.module("imagery.templates",[]).run(["$templateCache",function(e){e.put("imagery/contributors/contributors.html",'<span class="contributors" ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-class="(contributors.show || contributors.ingroup || contributors.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated contributors-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div ng-repeat="contributor in contributors.orgs | activeContributors" style="text-align:cnter">\r\n      <a ng-href="{{contributor.href}}" name="contributors{{$index}}" title="{{contributor.title}}" target="_blank">\r\n         <img ng-src="{{contributor.image}}" alt="{{contributor.title}}" class="elvis-logo" ng-class="contributor.class"></img>\r\n      </a>\r\n   </div>\r\n</span>'),e.put("imagery/contributors/show.html",'<a ng-mouseenter="over()" ng-mouseleave="out()" class="contributors-link" title="Click to lock/unlock contributors list."\r\n      ng-click="toggleStick()" href="#contributors0">Contributors</a>'),e.put("imagery/panes/panes.html",'<div class="mapContainer" class="col-md-12" style="padding-right:0"  ng-attr-style="right:{{right.width}}">\r\n   <span common-baselayer-control class="baselayer-slider" max-zoom="16" title="Satellite to Topography bias on base map."></span>\r\n   <div class="panesMapContainer" geo-map configuration="data.map">\r\n      <geo-extent></geo-extent>\r\n      <common-feature-info></common-feature-info>\r\n      <icsm-layerswitch></icsm-layerswitch>\r\n   </div>\r\n   <div class="base-layer-controller">\r\n      <div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),e.put("imagery/panes/tabs.html",'<!-- tabs go here -->\r\n<div id="panesTabsContainer" class="paneRotateTabs" style="opacity:0.9" ng-style="{\'right\' : contentLeft +\'px\'}">\r\n\r\n   <div class="paneTabItem" style="width:60px; opacity:0">\r\n\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'download\'}" ng-click="setView(\'download\')">\r\n      <button class="undecorated">Datasets Download</button>\r\n   </div>\r\n   <!--\r\n\t<div class="paneTabItem" ng-class="{\'bold\': view == \'search\'}" ng-click="setView(\'search\')">\r\n\t\t<button class="undecorated">Search</button>\r\n\t</div>\r\n\t<div class="paneTabItem" ng-class="{\'bold\': view == \'maps\'}" ng-click="setView(\'maps\')">\r\n\t\t<button class="undecorated">Layers</button>\r\n\t</div>\r\n   -->\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'downloader\'}" ng-click="setView(\'downloader\')">\r\n      <button class="undecorated">Products Download</button>\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'glossary\'}" ng-click="setView(\'glossary\')">\r\n      <button class="undecorated">Glossary</button>\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'help\'}" ng-click="setView(\'help\')">\r\n      <button class="undecorated">Help</button>\r\n   </div>\r\n</div>'),e.put("imagery/side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),e.put("imagery/side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" ng-attr-style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n\r\n    <div class="right-side-menu-container" ng-show="right.active === \'download\'" icsm-view></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'maps\'" icsm-maps></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'glossary\'" icsm-glossary></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'help\'" icsm-help></div>\r\n    <panel-close-on-event only-on="search" event-name="clear.button.fired"></panel-close-on-event>\r\n</div>\r\n'),e.put("imagery/toolbar/toolbar.html",'<div class="elevation-toolbar noPrint">\r\n   <div class="toolBarContainer">\r\n      <div>\r\n         <ul class="left-toolbar-items">\r\n            <div class="btn-group searchBar" ng-show="root.whichSearch != \'region\'">\r\n               <div class="input-group input-group-custom" geo-search >\r\n                  <input type="text" ng-autocomplete ng-model="values.from.description" options=\'{country:"au"}\' size="32" title="Select a locality to pan the map to."\r\n                     class="form-control" aria-label="...">\r\n                  <div class="input-group-btn">\r\n                     <button ng-click="zoom(false)" exp-ga="[\'send\', \'event\', \'icsm\', \'click\', \'zoom to location\']" class="btn btn-default" title="Pan and potentially zoom to location.">\r\n                        <i class="fa fa-search"></i>\r\n                     </button>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </ul>\r\n         <ul class="right-toolbar-items">\r\n            <li>\r\n               <panel-trigger panel-id="download" panel-width="590px" name="Download" default="default" icon-class="fa-list" title="Select an area of interest and select datasets for download"></panel-trigger>\r\n            </li>\r\n            <li>\r\n               <panel-trigger panel-id="help" panel-width="590px" name="Help" icon-class="fa-question-circle-o" title="Show help"></panel-trigger>\r\n            </li>\r\n            <li>\r\n               <panel-trigger panel-id="glossary" panel-width="590px" name="Glossary" icon-class="fa-book" title="Show glossary"></panel-trigger>\r\n            </li>\r\n            <li reset-page></li>\r\n         </ul>\r\n      </div>\r\n   </div>\r\n</div>')}]);